# Release Notes - v0.3.0

## 🎉 版本控制系统正式上线！

发布日期：2026-02-15

## ✨ 新功能

### 📸 版本快照系统
- **自动版本记录**：每次保存 Prompt 时自动创建版本快照
- **版本号管理**：自动递增的版本号，清晰追踪历史
- **完整快照**：保存完整的 Prompt 状态，包括所有标签、参数和设置

### ⏱️ 时间轴视图
- **可视化历史**：美观的时间线布局，展示所有历史版本
- **版本标记**：当前版本高亮显示，一目了然
- **快速预览**：直接在时间线上查看标签和图片
- **评分系统**：5星评价系统，记录版本质量

### 🖼️ 图片关联
- **图片上传**：支持为每个版本上传关联图片
- **格式支持**：JPG、PNG、GIF，最大 5MB
- **预览功能**：时间线和对比视图中直接预览
- **Base64 存储**：无需外部服务，数据完全本地化

### 🔍 版本对比
- **智能对比**：选择任意两个版本进行详细对比
- **差异高亮**：
  - 🟢 绿色：新增的内容
  - 🔴 红色：移除的内容
  - 🔵 蓝色：修改的内容
- **全面对比**：标题、描述、标签、参数全方位对比
- **图片对比**：并排展示两个版本的关联图片

### ⏪ 版本恢复
- **一键恢复**：快速恢复到任意历史版本
- **自动备份**：恢复前自动备份当前状态
- **安全可靠**：数据完整性保障

### 📝 版本备注
- **自定义备注**：为每个版本添加备注，记录修改思路
- **自动备注**：系统操作自动添加说明（如"恢复前的自动备份"）

## 🎨 UI/UX 改进

### 视觉优化
- 新增"历史"图标按钮（蓝色）
- 时间线垂直布局，视觉层次清晰
- 版本对比双栏设计
- 颜色编码，信息一目了然

### 交互优化
- 模态框设计，不影响主界面
- 拖拽上传图片
- 点击星星快速评分
- 悬停预览详细信息

## 📁 技术改进

### 新增文件
- `src/utils/version-manager.ts` - 版本管理工具类
- `src/components/TimelineView.tsx` - 时间轴视图组件
- `src/components/ImageUpload.tsx` - 图片上传组件
- `src/components/CompareView.tsx` - 版本对比组件

### 数据模型
- 扩展 `PromptSnapshot` 接口
- 支持双格式字符串（Midjourney + Stable Diffusion）
- 增强的 metrics 对象

### 核心功能
- `createSnapshot` - 创建版本快照
- `restoreFromSnapshot` - 恢复版本
- `compareSnapshots` - 对比版本
- `updateSnapshotRating` - 更新评分

## 🐛 修复

- 改进了快照数据的完整性
- 优化了存储性能

## 📊 统计数据

- **新增代码**：~800 行
- **新增组件**：4 个
- **新增工具类**：1 个
- **测试场景**：15+ 个

## 🚀 使用指南

### 查看版本历史
1. 在 Prompt 卡片上点击蓝色的"历史"图标
2. 在时间线上浏览所有历史版本
3. 查看每个版本的详细信息

### 创建版本快照
1. 编辑 Prompt 后点击"保存"
2. 系统自动创建版本快照
3. 可选：上传关联图片，添加备注

### 对比版本
1. 在时间线中点击第一个版本的"对比"按钮
2. 再点击第二个版本的"对比"按钮
3. 查看详细的差异报告

### 恢复版本
1. 在时间线中找到目标版本
2. 点击绿色的"恢复"按钮
3. 确认后，系统会恢复到该版本（当前状态会自动备份）

### 评价版本
1. 点击版本卡片上的星星进行评分（1-5星）
2. 评分会立即保存
3. 可以随时修改评分

## 🎯 应用场景

### Prompt 优化流程
1. 创建初始 Prompt
2. 生成图片并上传到快照
3. 调整参数，保存新版本
4. 对比版本，选择最佳效果
5. 给优秀版本打高分
6. 继续迭代优化

### A/B 测试
1. 创建两个不同风格的版本
2. 分别生成图片
3. 并排对比效果
4. 选择最佳方案继续发展

### 学习记录
1. 记录每次修改的思路（备注）
2. 通过时间线回顾优化过程
3. 查看哪些调整产生了好效果
4. 积累优化经验

## ⚠️ 已知限制

- 图片大小限制为 5MB
- 快照数据存储在本地（Chrome Storage API）
- 暂不支持云端同步

## 🔮 下个版本预告 (v0.4.0)

- 数据导出/导入功能
- 暗黑模式
- 设置面板
- 快捷键自定义
- 性能优化

## 🙏 致谢

感谢所有测试用户的反馈！

---

**完整更新日志**：查看 [CHANGELOG.md](./CHANGELOG.md)
