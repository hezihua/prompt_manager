# 🧪 v0.2.0 本地测试指南

## 📦 版本信息

- **版本号**: v0.2.0
- **发布日期**: 2026-01-21
- **主要功能**: 标签编辑器

---

## 🚀 在 Chrome 中更新扩展

### 方法 1: 刷新现有扩展（推荐）

如果你已经安装了 v0.1.0：

1. **打开扩展管理页面**
   ```
   chrome://extensions/
   ```

2. **找到「AI Prompt 管理器」**
   - 应该能看到当前版本是 0.1.0

3. **点击刷新按钮** 🔄
   - 在扩展卡片上点击刷新图标
   - 版本号应该更新为 **0.2.0**

4. **验证更新**
   - 查看版本号是否变为 0.2.0
   - 如果没变，继续下一步

5. **强制刷新**（如果需要）
   - 点击「移除」删除旧版本
   - 重新加载（参考方法 2）

---

### 方法 2: 重新加载扩展

如果是首次安装或需要完全重新加载：

1. **打开扩展管理页面**
   ```
   chrome://extensions/
   ```

2. **开启开发者模式**
   - 右上角的开关

3. **移除旧版本**（如果有）
   - 找到「AI Prompt 管理器」
   - 点击「移除」

4. **加载新版本**
   - 点击「加载已解压的扩展程序」
   - 在文件选择器的地址栏输入：
     ```
     \\wsl.localhost\Ubuntu\home\hezihua\workspace\prompt_manager\dist
     ```
   - 按回车，选择文件夹

5. **验证安装**
   - ✅ 版本号：**0.2.0**
   - ✅ 状态：已启用
   - ✅ 没有错误

---

## ✨ 测试新功能

### 1. 测试「新建」功能

#### 步骤：

1. **打开侧边栏**
   ```
   按 Ctrl+Shift+P (Mac: Cmd+Shift+P)
   ```

2. **点击右上角的「新建」按钮**
   - 应该弹出编辑器模态框

3. **验证编辑器界面**
   - ✅ 左侧：标题输入框
   - ✅ 左侧：描述文本框
   - ✅ 左侧：正面标签编辑器
   - ✅ 左侧：负面标签编辑器
   - ✅ 左侧：预览面板
   - ✅ 右侧：标签库（40+ 预设标签）
   - ✅ 底部：取消和保存按钮

---

### 2. 测试标签库

#### 步骤：

1. **在编辑器右侧找到标签库**

2. **测试分类筛选**
   - 点击「主体」→ 应该只显示主体类标签
   - 点击「风格」→ 应该只显示风格类标签
   - 点击「全部」→ 显示所有标签

3. **测试搜索**
   - 在搜索框输入 "cyber"
   - 应该只显示包含 "cyber" 的标签（cyberpunk）

4. **测试添加标签**
   - 点击任意标签（如 "masterpiece"）
   - 应该自动添加到左侧的正面标签编辑器

5. **验证标签内容**
   - ✅ 显示英文文本
   - ✅ 显示中文翻译（如果有）
   - ✅ 显示权重值

---

### 3. 测试标签编辑

#### 步骤：

1. **添加几个标签**
   - 从标签库添加 3-5 个标签

2. **测试拖拽排序** 🎯
   - 鼠标悬停在标签左侧的拖拽手柄（≡）
   - 拖动标签到不同位置
   - ✅ 应该有平滑的动画效果
   - ✅ 松开鼠标后，顺序应该改变

3. **测试权重滑块** ⚖️
   - 找到标签右侧的滑块
   - 拖动滑块
   - ✅ 数值应该实时更新（0.5 - 2.0）
   - ✅ 预览面板应该实时更新

4. **测试类型选择**
   - 点击类型下拉框
   - 选择不同的类型
   - ✅ 标签颜色应该改变

5. **测试文本编辑**
   - 点击标签文本框
   - 修改文本内容
   - ✅ 预览应该实时更新

6. **测试删除标签**
   - 点击标签右侧的 ✕ 按钮
   - ✅ 标签应该被移除

7. **测试添加自定义标签**
   - 点击「添加标签」按钮
   - ✅ 应该添加一个空白标签
   - 填写内容并测试

---

### 4. 测试实时预览

#### 步骤：

1. **添加几个标签后，滚动到预览面板**

2. **切换预览格式**
   - 点击「Midjourney」按钮
   - 查看格式：`(text::weight)`
   - 点击「Stable Diffusion」按钮
   - 查看格式：`(text:weight)` + 负面 Prompt

3. **验证预览更新**
   - 修改任意标签
   - ✅ 预览应该立即更新
   - 调整权重
   - ✅ 预览中的数值应该改变
   - 拖拽排序
   - ✅ 预览中的顺序应该改变

---

### 5. 测试保存功能

#### 步骤：

1. **创建一个完整的 Prompt**
   - 标题：「测试 v0.2.0」
   - 描述：「测试新功能」
   - 添加 5-8 个标签
   - 调整权重和顺序

2. **点击「保存」按钮**
   - ✅ 编辑器应该关闭
   - ✅ 侧边栏应该刷新
   - ✅ 新 Prompt 应该出现在列表顶部

3. **验证保存的内容**
   - 查看标题是否正确
   - 标签是否完整
   - 权重是否正确

---

### 6. 测试编辑功能

#### 步骤：

1. **找到刚才创建的 Prompt 卡片**

2. **点击「编辑」图标**（铅笔）
   - ✅ 应该打开编辑器
   - ✅ 所有数据应该正确加载

3. **修改内容**
   - 更改标题
   - 添加/删除标签
   - 调整权重
   - 拖拽排序

4. **保存修改**
   - 点击「保存」
   - ✅ 更改应该生效
   - ✅ Prompt 卡片应该更新

---

### 7. 测试负面标签

#### 步骤：

1. **新建或编辑一个 Prompt**

2. **滚动到「负面提示词」部分**

3. **点击「添加标签」**
   - 添加一些负面标签
   - 如：lowres, bad anatomy

4. **切换预览到「Stable Diffusion」**
   - ✅ 应该看到 "Negative prompt: ..." 部分

5. **保存并验证**

---

## 🐛 常见问题排查

### 问题 1: 版本号没有更新

**解决方案**：
1. 在 `chrome://extensions/` 完全移除扩展
2. 重新加载 dist 文件夹
3. 检查版本号是否为 0.2.0

### 问题 2: 编辑器打不开

**检查**：
- Console 是否有错误？
- Service Worker 是否运行正常？

**解决方案**：
1. 刷新扩展
2. 刷新网页
3. 重新打开侧边栏

### 问题 3: 拖拽不工作

**可能原因**：
- 没有抓住拖拽手柄

**解决方案**：
- 鼠标悬停在标签最左侧的 ≡ 图标
- 确保点击并按住拖拽手柄

### 问题 4: 标签库没有显示

**检查**：
- 编辑器右侧是否有内容？

**解决方案**：
- 确保屏幕宽度足够（编辑器需要较大宽度）
- 检查 Console 是否有错误

### 问题 5: 保存后没有反应

**检查**：
- Console 是否有错误？
- 标题是否填写？（必填项）

**解决方案**：
- 确保至少填写了标题
- 确保至少有一个正面标签

---

## ✅ 测试检查清单

### 基础功能（v0.1.0 兼容性）
- [ ] 侧边栏能正常打开
- [ ] 搜索功能正常
- [ ] 排序功能正常
- [ ] 收藏功能正常
- [ ] 删除功能正常
- [ ] 复制功能正常

### 新功能（v0.2.0）
- [ ] 「新建」按钮能打开编辑器
- [ ] 编辑器界面正常显示
- [ ] 标签库能正常浏览
- [ ] 标签库搜索正常
- [ ] 可以从标签库添加标签
- [ ] 拖拽排序功能正常
- [ ] 权重滑块功能正常
- [ ] 类型选择功能正常
- [ ] 文本编辑功能正常
- [ ] 删除标签功能正常
- [ ] 实时预览功能正常
- [ ] 格式切换功能正常
- [ ] 保存功能正常
- [ ] 编辑功能正常
- [ ] 负面标签功能正常

### 性能
- [ ] 拖拽流畅（60fps）
- [ ] 预览更新即时（< 50ms）
- [ ] 保存快速（< 500ms）
- [ ] 无明显卡顿

### UI/UX
- [ ] 界面美观
- [ ] 操作直观
- [ ] 反馈及时
- [ ] 无布局错乱
- [ ] 动画平滑

---

## 📸 预期效果截图

### 编辑器界面

```
┌─────────────────────────────────────────────────────────┐
│  [✕] AI Prompt 编辑器                                    │
├──────────────────────┬──────────────────────────────────┤
│  标题: [输入框]      │  标签库                          │
│  描述: [文本框]      │  [搜索框]                        │
│                      │  [全部][主体][风格]...           │
│  正面提示词          │                                  │
│  ┌─────────────────┐│  ┌─────────────────┐             │
│  │ ≡ masterpiece   ││  │ + masterpiece   │             │
│  │   [1.2] ----o   ││  │   杰作 (1.2)    │             │
│  └─────────────────┘│  └─────────────────┘             │
│  [+ 添加标签]       │  ┌─────────────────┐             │
│                      │  │ + cyberpunk     │             │
│  负面提示词          │  │   赛博朋克 (1.5)│             │
│  [+ 添加标签]       │  └─────────────────┘             │
│                      │  ...                             │
│  预览                │                                  │
│  [MJ][SD]            │                                  │
│  (masterpiece::1.2)..│                                  │
├──────────────────────┴──────────────────────────────────┤
│  2 个正面 · 0 个负面     [取消] [保存]                   │
└─────────────────────────────────────────────────────────┘
```

---

## 📝 测试报告模板

测试完成后，可以记录：

```markdown
## 测试报告 - v0.2.0

**测试日期**: YYYY-MM-DD  
**测试人**: XXX  
**浏览器**: Chrome XXX  
**系统**: Windows/Mac/Linux

### 功能测试结果

| 功能 | 状态 | 备注 |
|------|------|------|
| 新建 Prompt | ✅/❌ | ... |
| 标签库 | ✅/❌ | ... |
| 拖拽排序 | ✅/❌ | ... |
| 权重滑块 | ✅/❌ | ... |
| 实时预览 | ✅/❌ | ... |
| 保存功能 | ✅/❌ | ... |
| 编辑功能 | ✅/❌ | ... |

### 发现的问题

1. ...
2. ...

### 建议

1. ...
2. ...
```

---

## 🎉 测试成功后

如果所有测试都通过：

1. ✅ 可以开始日常使用
2. ✅ 可以准备 GitHub 发布
3. ✅ 可以开始第三周开发

如果发现问题：

1. 记录问题详情
2. 检查 Console 错误
3. 提供复现步骤
4. 等待修复

---

**祝测试顺利！** 🚀

有任何问题随时反馈！
